/*!
 * ng-backstretch
 * https://github.com/rprovost/ng-backstretch
 *
 * Copyright (c) 2014-2015 Ryan Provost
 * Licensed under the MIT license.
 */
angular.module("ng-backstretch",[]).directive("backstretch",["$window","$timeout",function(a,b){return{restrict:"A",scope:{images:"&backstretchImages",duration:"&backstretchDuration",fade:"&backstretchFade"},link:function(c,d){if(c.images=Array.isArray(c.images())?c.images():[c.images()],c.duration=c.duration()||5e3,c.fade=c.fade()||1,0===c.images.length)return!1;var e={wrapper:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999998,position:"absolute"},image:{position:"absolute",opacity:0,margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999,transition:"all "+c.fade+"s"}};c.wrapper=angular.element('<div class="backstretch"></div>'),c.wrapper.css(e.wrapper),c.images.forEach(function(a){c.image=angular.element("<img>"),c.image[0].src=a,c.image.css(e.image),c.wrapper.append(c.image)}),d.append(c.wrapper),c.index=0,c.load=function(){c.ratio=this.width/this.height,c.resize(),c.show(c.index++)},c.resize=function(){var a,b={left:0,top:0,width:"auto",height:"auto"},e=d[0].offsetWidth,f=e,g=d[0].offsetHeight,h=f/c.ratio;h>=g?(a=(h-g)/2,b.top="-"+a+"px"):(h=g,f=h*c.ratio,a=(f-e)/2,b.left="-"+a+"px"),b.width=f+"px",b.height=h+"px",c.wrapper.css({width:e,height:g});for(var i=0;i<c.wrapper.children().length;i++){var j=angular.element(c.wrapper.children()[i]);j.css(b)}},c.show=function(a){var d=c.wrapper.children()[a];return c.image=angular.element(d),1===c.images.length?void c.image.css({opacity:1}):(a>=c.images.length-1&&(c.index=0),c.image.css({opacity:1}),b(function(){c.image.css({opacity:0})},c.duration),void b(function(){c.show(c.index++)},c.duration))},c.image.bind("load",c.load),angular.element(a).bind("resize",c.resize)}}}]);
//# sourceMappingURL=ng-backstretch.min.js.map